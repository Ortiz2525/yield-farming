const moralisUtils = require('../utils/moralisUtils');
const Moralis = require('moralis/node');
const utils = require('../utils/utils');

const options = { useMasterKey: true };

// node scripts/moralis/test/newsletter.js

// Script for manual testing
async function main() {
  console.log('Starting test...');
  console.time('Process');

  await moralisUtils.initialize({ useMasterKey: true });

  console.group();

  const result = await Moralis.Cloud.run(
    'postNewsletterSubscription',
    {
      ethAddress: '',
      email: '',
    },
    options,
  );

  // const result = await Moralis.Cloud.run(
  //   'deleteNewsletterSubscription',
  //   {
  //     ethAddress: '',
  //   },
  //   options,
  // );

  // const result = await Moralis.Cloud.run(
  //   'getUserProfile',
  //   {
  //     ethAddress: '',
  //   },
  //   options,
  // );

  console.log({ result });

  console.groupEnd();
  utils.printElapsedTime('Process');
  console.log('Test finished.');
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
